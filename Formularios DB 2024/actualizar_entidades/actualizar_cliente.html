<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Actualizar Cliente</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../Styles/actualizar_cliente.css">
  <script>
    function buscarCliente() {
      const rut = document.getElementById('buscar_rut').value;
      if (rut) {
        // Simulación de búsqueda: se debe reemplazar con la lógica real
        // Aquí debería ir la llamada AJAX para obtener los datos del servidor
        // Ejemplo de datos simulados:
        const data = {
          nombre: "Juan",
          apellido_materno: "Pérez",
          apellido_paterno: "González",
          email: "juan@example.com",
          contrasena: "1234",
          sexo: "Masculino",
          calle: "Calle Falsa",
          numero: "123",
          comuna: "Comuna Ejemplo",
          fecha_nacimiento: "1990-01-01",
          telefono_usuario: "98765432",
          tipo_cliente: "Regular"
        };
        document.getElementById('nombre').value = data.nombre;
        document.getElementById('apellido_materno').value = data.apellido_materno;
        document.getElementById('apellido_paterno').value = data.apellido_paterno;
        document.getElementById('email').value = data.email;
        document.getElementById('contrasena').value = data.contrasena;
        document.getElementById('sexo').value = data.sexo;
        document.getElementById('calle').value = data.calle;
        document.getElementById('numero').value = data.numero;
        document.getElementById('comuna').value = data.comuna;
        document.getElementById('fecha_nacimiento').value = data.fecha_nacimiento;
        document.getElementById('telefono_usuario').value = data.telefono_usuario;
        document.getElementById('tipo_cliente').value = data.tipo_cliente;
      } else {
        alert('Por favor, ingrese un RUT');
      }
    }
  </script>
</head>
<body>

<div class="container">
  <div class="buscar-container text-center mb-4">
    <h1>Buscar Cliente por RUT</h1>
    <label for="buscar_rut">RUT:</label>
    <input type="text" id="buscar_rut" name="buscar_rut" class="form-control" required pattern="[0-9]{2}\.[0-9]{3}\.[0-9]{3}-[0-9Kk]{1}" placeholder="Ejemplo: 12.345.678-9">
    <button type="button" class="btn btn-primary mt-2" onclick="buscarCliente()">Buscar</button>
  </div>

  <form action="procesar_actualizacion_cliente.php" method="POST">
    <div class="logo-container text-center">
      <img src="../Images/anidgraf-Photoroom.png" alt="Logo">
      <h1>Formulario de Actualización de Cliente</h1>
    </div>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="rut">RUT:</label>
        <input type="text" class="form-control" id="rut" name="rut" required pattern="[0-9]{2}\.[0-9]{3}\.[0-9]{3}-[0-9Kk]{1}" placeholder="Ejemplo: 12.345.678-9" disabled>
      </div>
      <div class="form-group col-md-6">
        <label for="nombre">Nombre:</label>
        <input type="text" class="form-control" id="nombre" name="nombre" maxlength="40">
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="apellido_materno">Apellido Materno:</label>
        <input type="text" class="form-control" id="apellido_materno" name="apellido_materno">
      </div>
      <div class="form-group col-md-6">
        <label for="apellido_paterno">Apellido Paterno:</label>
        <input type="text" class="form-control" id="apellido_paterno" name="apellido_paterno">
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="email">Email:</label>
        <input type="email" class="form-control" id="email" name="email">
      </div>
      <div class="form-group col-md-6">
        <label for="contrasena">Contraseña:</label>
        <input type="password" class="form-control" id="contrasena" name="contrasena">
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="sexo">Sexo:</label>
        <input type="text" class="form-control" id="sexo" name="sexo" maxlength="10">
      </div>
      <div class="form-group col-md-6">
        <label for="calle">Calle:</label>
        <input type="text" class="form-control" id="calle" name="calle">
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="numero">Número:</label>
        <input type="number" class="form-control" id="numero" name="numero" max="8">
      </div>
      <div class="form-group col-md-6">
        <label for="comuna">Comuna:</label>
        <input type="text" class="form-control" id="comuna" name="comuna">
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="fecha_nacimiento">Fecha de Nacimiento:</label>
        <input type="date" class="form-control" id="fecha_nacimiento" name="fecha_nacimiento">
      </div>
      <div class="form-group col-md-6">
        <label for="telefono_usuario">Teléfono:</label>
        <input type="tel" class="form-control" id="telefono_usuario" name="telefono_usuario" pattern="[0-9]{8}" placeholder="Ejemplo: 12345678">
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="tipo_cliente">Tipo de Cliente:</label>
        <input type="text" class="form-control" id="tipo_cliente" name="tipo_cliente" value="SIN_ESPECIFICAR" maxlength="255">
      </div>
    </div>
    <button type="submit" class="btn btn-primary">Actualizar</button>
  </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.min.js"></script>
</body>
</html>
