<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Actualizar Venta</title>
<link rel="stylesheet" href="../Styles/actualizar_venta.css">
<style>
  /* Puedes añadir estilos adicionales si es necesario */
</style>
<script>
  function buscarVenta() {
    const codigoVenta = document.getElementById('codigo_venta').value;
    if (codigoVenta) {
      // Aquí se debe realizar la lógica para buscar la venta en la base de datos
      // Puedes usar AJAX para obtener los datos del servidor
      // En este ejemplo, simularemos una búsqueda y actualización localmente
      
      // Datos simulados de la venta encontrada
      const ventaEncontrada = {
        numero_factura: "F123",
        rut_venta: "12.345.678-9",
        rut_cliente: "15.678.901-2",
        total_venta: 50000,
        hora_venta: "10:30",
        subtotal: 43478,
        estado_venta: "Pendiente",
        iva_venta: 6522
      };
      
      // Actualizar los campos en el formulario con los datos encontrados
      document.getElementById('numero_factura').value = ventaEncontrada.numero_factura;
      document.getElementById('rut_venta').value = ventaEncontrada.rut_venta;
      document.getElementById('rut_cliente').value = ventaEncontrada.rut_cliente;
      document.getElementById('total_venta').value = ventaEncontrada.total_venta;
      document.getElementById('hora_venta').value = ventaEncontrada.hora_venta;
      document.getElementById('subtotal').value = ventaEncontrada.subtotal;
      document.getElementById('estado_venta').value = ventaEncontrada.estado_venta;
      document.getElementById('iva_venta').value = ventaEncontrada.iva_venta;
      
      // Habilitar el botón de Actualizar
      document.getElementById('btn_actualizar').disabled = false;
    } else {
      alert('Por favor, ingrese el Código de Venta para buscar.');
    }
  }
</script>
</head>
<body>

<div class="container">
  <form id="form_actualizar" action="procesar_actualizacion_venta.php" method="POST">
    <div class="logo-container">
      <img src="../Images/anidgraf-Photoroom.png" alt="Logo">
      <h1>Actualizar Venta</h1>
    </div>
    <label for="codigo_venta">Código de Venta:</label>
    <input type="text" id="codigo_venta" name="codigo_venta" required>

    <table class="ventas-table">
        <caption>Detalle de Venta</caption>
        <thead>
            <tr>
                <th>Número Factura</th>
                <th>RUT Venta</th>
                <th>RUT Cliente</th>
                <th>Total Venta</th>
                <th>Hora Venta</th>
                <th>Subtotal</th>
                <th>Estado Venta</th>
                <th>IVA Venta</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input type="text" id="numero_factura" name="numero_factura"></td>
                <td><input type="text" id="rut_venta" name="rut_venta"></td>
                <td><input type="text" id="rut_cliente" name="rut_cliente"></td>
                <td><input type="number" id="total_venta" name="total_venta"></td>
                <td><input type="text" id="hora_venta" name="hora_venta"></td>
                <td><input type="number" id="subtotal" name="subtotal"></td>
                <td><input type="text" id="estado_venta" name="estado_venta"></td>
                <td><input type="number" id="iva_venta" name="iva_venta"></td>
            </tr>
        </tbody>
    </table>

    <button type="button" onclick="buscarVenta()">Buscar Venta</button>
    <button type="submit" id="btn_actualizar" disabled>Actualizar Venta</button>
  </form>
</div>

</body>
</html>
